import{B as T,D as F,H as N,J as B,K as D,b as C,d as E,e as L,f as I,g as P,h as j,o as k}from"./chunk-F3WL6AJD.js";import{i as _,o as M,ra as u}from"./chunk-AQ45PV6S.js";import"./chunk-4YRY4IP2.js";import{Fb as s,Jb as d,Kb as g,Lb as p,Mb as S,Na as l,Nb as w,Oa as m,Y as y,db as b,i as h,nb as e,ob as t,pb as o,ub as x,x as v}from"./chunk-M5MLDAKI.js";import"./chunk-4CLCTAJ7.js";var O=class c{constructor(i,a,r){this.messageServ=i;this._authServ=a;this._router=r}user={username:"",password:""};loginLoading=!1;validateForm(){return this.user.username=this.user.username.trim(),this.user.password=this.user.password.trim(),this.user.username.length===0||this.user.password.length===0?(this.messageServ.add({severity:"error",summary:"Campos vac\xEDos.",detail:"Por favor, ingrese sus credenciales.",key:"toast-login",life:2500}),!1):!0}login(){this.validateForm()&&(this.loginLoading=!0,this._authServ.login(this.user).pipe(v(i=>(i.status===401?(this.messageServ.add({severity:"error",summary:"Credenciales incorrectas.",detail:"El usuario y/o la contrase\xF1a son incorrectos.",key:"toast-login",life:2500}),this.user={username:"",password:""}):(this.messageServ.add({severity:"error",summary:"Error",detail:"Se produjo un error al intentar iniciar sesi\xF3n.",key:"toast-login",life:2500}),this.user={username:"",password:""}),console.error(i),this.loginLoading=!1,h))).subscribe(i=>{i.status===200&&(this.messageServ.add({severity:"success",summary:"Inicio de sesi\xF3n exitoso.",detail:`${i.body}`,key:"toast-login",life:5e3}),setTimeout(()=>{this._router.navigate(["/cotizador"]),this.loginLoading=!1},1500))}))}static \u0275fac=function(a){return new(a||c)(m(u),m(M),m(_))};static \u0275cmp=y({type:c,selectors:[["app-login"]],standalone:!0,features:[S([u]),w],decls:28,vars:3,consts:[[1,"contenedor","flex","flex-col","items-center","justify-center","w-screen","h-dvh","gap-1"],[1,"flex","flex-col","justify-center","max-w-[22rem]"],[1,"flex","justify-center","w-full"],[1,"w-7/12"],[1,"w-full",3,"src"],[3,"submit"],[1,"flex","justify-center","items-center","w-full"],["src","/logo_globaltec_png.png","alt","logo_globaltec",2,"height","120px"],[1,"loginBox","flex","flex-col","justify-center","items-center","rounded-border","p-8","gap-4"],[1,"font-bold","m-0","text-3xl"],[1,"flex","flex-col","justify-center","items-center","gap-2"],[1,"h-1","w-full","m-0"],[1,"text-sm","text-center"],[1,"flex","flex-col","gap-2","w-full","px-4"],[1,"flex","flex-col"],["for","username"],["pInputText","","type","text","id","username","name","username","aria-describedby","username-help",1,"focus:border","focus:border-sky-500",3,"ngModelChange","ngModel"],["for","password"],["pInputText","","type","password","id","password","name","password","aria-describedby","password-help",1,"focus:border","focus:border-sky-500",3,"ngModelChange","ngModel"],["pButton","","type","submit",1,"boton","border-0","rounded-3xl","text-surface-0","text-base","font-semibold","uppercase","py-2","px-6","text-center","align-middle",3,"loading"],["position","bottom-center","key","toast-login"]],template:function(a,r){a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o(4,"img",4),t()(),e(5,"form",5),x("submit",function(){return r.login()}),e(6,"div",6),o(7,"img",7),t(),e(8,"div",8)(9,"h1",9),s(10,"Inicia Sesi\xF3n!"),t(),e(11,"div",10),o(12,"hr",11),e(13,"span",12),s(14,"Ingresa tus credenciales aqu\xED abajo e ingresa al sistema!"),t(),e(15,"div",13)(16,"div",14)(17,"label",15),s(18,"Usuario"),t(),e(19,"input",16),p("ngModelChange",function(n){return g(r.user.username,n)||(r.user.username=n),n}),t()(),e(20,"div",14)(21,"label",17),s(22,"Contrase\xF1a"),t(),e(23,"input",18),p("ngModelChange",function(n){return g(r.user.password,n)||(r.user.password=n),n}),t()()(),o(24,"hr",11),t(),e(25,"button",19),s(26," Ingresar "),t()()()(),o(27,"p-toast",20),t()),a&2&&(l(19),d("ngModel",r.user.username),l(4),d("ngModel",r.user.password),l(2),b("loading",r.loginLoading))},dependencies:[k,j,C,E,L,P,I,F,T,N,D,B],styles:[".contenedor[_ngcontent-%COMP%]{background:linear-gradient(to right,#33b5ff,#004166)}.loginBox[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif!important;background-color:#fff}hr[_ngcontent-%COMP%]{margin:10px 0;width:21rem;height:2px;border:none;background:linear-gradient(to right,#33b5ff,#004166)}.boton[_ngcontent-%COMP%]{background:linear-gradient(to right,#2ba4e9,#004166);transition:transform 80ms ease-in}.boton[_ngcontent-%COMP%]:focus{outline:none}.boton[_ngcontent-%COMP%]:active{transform:scale(.95)}"]})};export{O as LoginComponent};
